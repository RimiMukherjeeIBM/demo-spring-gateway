server:
  port: 8081
springdoc.show-actuator: true
spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      routes:
        - id: openapi
          order: 0
          predicates:
            - Path=/openapi/v3/api-docs/**
          filters:
            - RewritePath=/openapi/v3/api-docs/(?<path>.*), /$\{path}/v3/api-docs
          uri: http://localhost:${server.port}

        - id: rws
          uri: http://localhost:8100/
          predicates:
            - Path=/rws/**
          filters:
            - RewritePath=/rws(?<segment>/?.*), /api/v1/$\{segment}
            #- SetPath=/api/v1/**
            #- StripPrefix=1
            #- AddRequestHeader=X-IBM-Client-Id, devKey
            #- AddRequestHeader=X-IBM-Client-Secret, Secret
        - id: astro
          uri: http://localhost:8200/
          predicates:
            - Path=/astro/**
          filters:
            - RewritePath=/astro(?<segment>/?.*), /api/v1$\{segment}

springdoc:
  swagger-ui:
    urls:
      - name: rws
        url: /openapi/v3/api-docs/rws
      - name: astro
        url: /openapi/v3/api-docs/astro